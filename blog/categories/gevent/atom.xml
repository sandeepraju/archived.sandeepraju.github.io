<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: gevent | Sandeep Raju]]></title>
  <link href="http://sandeepraju.in/blog/categories/gevent/atom.xml" rel="self"/>
  <link href="http://sandeepraju.in/"/>
  <updated>2014-10-20T11:33:20+00:00</updated>
  <id>http://sandeepraju.in/</id>
  <author>
    <name><![CDATA[Sandeep Raju]]></name>
    <email><![CDATA[me@sandeepraju.in]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[New kid in the block: SHARQ - An Open Source, Rate Limited, Queueing System]]></title>
    <link href="http://sandeepraju.in/blog/2014/10/20/new-kid-in-the-block-sharq-an-open-source-queue/"/>
    <updated>2014-10-20T08:08:00+00:00</updated>
    <id>http://sandeepraju.in/blog/2014/10/20/new-kid-in-the-block-sharq-an-open-source-queue</id>
    <content type="html"><![CDATA[<p>I have been fascinated about task queues since my college days. The way they are designed &amp; work has always interested me. Being a Pythonista, I have been using <a href="">Celery</a> for a long time. <a href="https://twitter.com/asksol">Ask</a> has done an amazing job building Celery and the ecosystem around it. It works great for general use-cases faced by a lot of companies in their day to day workflows (like sending out emails in the background, running periodic tasks, so on). However, sometimes that doesn&rsquo;t suffice.</p>

<!-- more -->


<p>Recently, I faced an unique situation. I had to rate limit the queues in a specific system. Having used Celery for quite a few years, it was my natural choice. But soon, I realized that creating queues dynamically is not possible with Celery. Celery also lacked a clean way to <a href="http://celery.readthedocs.org/en/latest/userguide/tasks.html#Task.rate_limit">update the rate limit of a queue globally</a>. This was not acceptable for my use case.</p>

<p>All my efforts at searching for a queue with this specific feature set (dynamic queues, realtime rate limits &amp; constant flow rate) resulted in scripts and hacks written by several people, around various existing systems that were not built for this use case. It was apparent after some time that there was no simple, out of the box, cleaner solution for this problem and there was a scope for filling this void. This is how SHARQ came into existence.</p>

<p>SHARQ bridges this void in a simple and elegant manner by supporting all the above mentioned features. It is built using <a href="http://www.python.org/">Python</a> (<a href="http://flask.pocoo.org/">Flask</a> &amp; <a href="http://www.gevent.org/">Gevent</a>) and uses <a href="http://redis.io/">Redis</a> as a broker. It talks HTTP with JSON payloads which makes writing workers in any language easy.</p>

<p>SHARQ can be installed from <a href="https://pypi.python.org/pypi">PyPI</a> using the following command:</p>

<p><code>bash
pip install sharq-server
</code></p>

<p>Once SHARQ is installed, it will expose a <strong>sharq-server</strong> command. The command is minimal and accepts a SHARQ configuration file. To get started quickly, grab the SHARQ <a href="https://raw.githubusercontent.com/plivo/sharq-server/master/sharq.conf">sample configuration file from here</a>. The SHARQ Server can be started with the following command:</p>

<p><code>bash
sharq-server --config sharq.conf
</code></p>

<p>and you&rsquo;ll see SHARQ server running in foreground&hellip;</p>

<pre><code>   ___ _              ___    ___
  / __| |_  __ _ _ _ / _ \  / __| ___ _ ___ _____ _ _
  \__ \ ' \/ _` | '_| (_) | \__ \/ -_) '_\ V / -_) '_|
  |___/_||_\__,_|_|  \__\_\ |___/\___|_|  \_/\___|_|

Version: 0.1.0

Listening on: 127.0.0.1:8080
</code></pre>

<p>Now, you can play around with SHARQ using its <a href="http://sharq.io/docs/apireference.html">REST APIs</a>.To know more about how to use SHARQ and its enqueue-dequeue-finish workflow, checkout the <a href="http://sharq.io/docs/gettingstarted.html">getting started section on sharq.io</a>.</p>

<p>SHARQ is open source and is <a href="https://github.com/plivo/sharq-server">available on Github</a>. Pull requests are always welcome!</p>

<p><strong>FURTHER READING</strong>:</p>

<ul>
<li><a href="http://sharq.io/docs">The SHARQ docs</a></li>
<li><a href="https://speakerdeck.com/sandeepraju/sharq-an-open-source-rate-limited-queueing-system-pycon-india-2014">SHARQ at PyCon India 2014</a></li>
<li><a href="https://github.com/sandeepraju/PyCon-India-2014">SHARQ resources of the PyCon talk</a></li>
<li>SHARQ example <a href="https://gist.github.com/sandeepraju/bfa72c7027e1d739b33e">Enqueue</a> and <a href="https://gist.github.com/sandeepraju/3da0ad035aa9bf5504b1">Dequeue</a> gists</li>
<li><a href="https://www.plivo.com/blog/sharq-a-flexible-open-source-rate-limited-queuing-system/">SHARQ on Plivo&rsquo;s blog</a></li>
</ul>


<p><strong>NOTE</strong>: I am the primary author of SHARQ and will be maintaining it constantly with features and bug fixes. SHARQ was written at <a href="https://www.plivo.com/">Plivo</a>. All the views and opinions expressed in this article are my own and does in no way reflect that of Plivo or any other entity.</p>
]]></content>
  </entry>
  
</feed>
